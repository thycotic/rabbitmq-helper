[title]: # (Online RabbitMq Install w/ TLS)
[tags]: # (rabbitmq,installation)
[priority]: # (130)

# Advanced installation of RabbitMq with TLS from a computer connected to the Internet

## General TLS requirements

- The certificate used has match the hostname used by RabbitMq. Wildcard certificates are supported
- The certificate has to be an RSA with 2048 bit encryption or higher
- The certificate chain has to be trusted by both the RabbitMq node and anything connecting to the RabbitMq host
    - If using self-signed certificated, ensure that the certificates are properly installed in the certificate store.
- RabbitMq itself now supports CNG and ECC certificates, but the RabbitMq Helper does not. 
    - The Helper can setup RabbitMq using an example certificate, so TLS in enabled in RabbitMq    
    - OpenSSL can then be used to manually convert a CNG and/or ECC certificate into PEM format
    - The example certificate files (ca.pem, cert.key, cert.pem) can then be overwritten with the files generated by OpenSSL    
    - See [Converting CNG and ECC Certificates](../certificate/convert-cngecctopem.md)
   
```powershell
$path = "$env:programfiles\Thycotic Software Ltd\RabbitMq Helper\Examples";

$cred = Get-Credential -Message "Enter the initial RabbitMq user username and password";
#if you don't want to be prompted you can hardcode your credential in the script
#$password = ConvertTo-SecureString “PlainTextPassword” -AsPlainText -Force
#$cred = New-Object System.Management.Automation.PSCredential (“CustomUserName”, $password)

# FQDN which will be used by clients connecting to this RabbitMq host
$fqdn = "localhost";

$certpath = $path;

$pfxCred = Get-Credential -UserName PfxUserName -Message "Enter the PFX password. Username is ignored";
#if you don't want to be prompted you can hardcode your credential in the script
#$password = ConvertTo-SecureString “PlainTextPassword” -AsPlainText -Force
#$pfxCred = New-Object System.Management.Automation.PSCredential (“Ignored”, $password)

Install-Connector `
    -Hostname $fqdn `
    -Credential $cred `
    -UseTls `
    -CaCertPath "$certpath\cacert.cer" `
    -PfxPath "$certpath\fqdn.pfx" `
    -PfxCredential $pfxCred `
    -Verbose

```

There are more switches for this commandlet, your run "get-help install-connector" when inside the helper for more information
